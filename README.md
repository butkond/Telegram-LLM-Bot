# Telegram LLM Bot

Этот проект представляет собой Telegram-бота, интегрированного с LLM (Large Language Model) через OpenRouter API. Бот позволяет пользователям общаться с LLM через Telegram, получая ответы на их запросы.

## Особенности

*   **Интеграция с LLM:** Использует OpenAI клиент (через OpenRouter) для взаимодействия с различными LLM.
*   **Контекст диалога:** Поддерживает контекст диалога для более релевантных ответов.
*   **Асинхронность:**  Использует библиотеку `aiogram` для асинхронной обработки запросов.
*   **Контейнеризация Docker:**  Легко развертывается и запускается с помощью Docker.
*   **Управление конфигурацией:** Использует переменные окружения для хранения секретных ключей и настроек.
*   **Автоматическое форматирование кода:** Настроен pre-commit для автоматической проверки и форматирования кода.

## Предварительные требования

*   Python 3.11+
*   Docker
*   Аккаунт Telegram Bot
*   Аккаунт OpenRouter (или аналогичный сервис LLM)

## Настройка

1.  **Клонируйте репозиторий:**

    ```bash
    git clone <your_repository_url>
    cd telegram-llm-bot
    ```

2.  **Создайте файл `.env`:**

    Скопируйте файл `.env.example` и переименуйте его в `.env`. Заполните значениями ваших токенов и API-ключа:

    ```
    TELEGRAM_BOT_TOKEN=<Your_Telegram_Bot_Token>
    OPENROUTER_API_KEY=<Your_OpenRouter_API_Key>
    ```

    *   `TELEGRAM_BOT_TOKEN`:  Получите токен от BotFather в Telegram.
    *   `OPENROUTER_API_KEY`: Получите API-ключ на платформе OpenRouter.

## Запуск бота

1.  **Соберите Docker-образ:**

    ```bash
    docker build -t telegram-llm-bot .
    ```

2.  **Запустите Docker-контейнер:**

    ```bash
    docker run -d --name llm-tg-bot --env-file ./.env  telegram-llm-bot
    ```

    *   `-d`: Запускает контейнер в фоновом режиме.
    *   `--name llm-tg-bot`:  Задает имя контейнера.
    *   `--env-file ./.env`:  Передает переменные окружения из файла `.env` в контейнер.
    *   `telegram-llm-bot`:  Имя созданного Docker-образа.

3.  **Проверка работы:**

    *   Откройте Telegram и найдите своего бота по имени, указанному при создании бота (BotFather).
    *   Отправьте команду `/start`, чтобы убедиться, что бот отвечает.
    *   Отправьте боту текстовое сообщение, чтобы протестировать интеграцию с LLM.

## Pre-commit

Этот проект использует pre-commit для автоматической проверки и форматирования кода перед каждым коммитом.

1.  **Установите pre-commit:**

    ```bash
    pip install pre-commit
    ```

2.  **Установите pre-commit в репозиторий:**

    ```bash
    pre-commit install
    ```

3.  Pre-commit будет запускаться автоматически перед каждым коммитом.  Если какие-либо проверки не пройдут, вам потребуется исправить ошибки, добавить измененные файлы в индекс Git (`git add`) и повторить коммит.

## Конфигурация

Основные настройки бота (токены, API-ключи) хранятся в переменных окружения, которые задаются в файле `.env`.  Модель LLM, используемая ботом, задается в файле `main.py`.  Вы можете изменить ее, отредактировав значение переменной `model` в функции `get_llm_response`.  Проверьте доступные модели на платформе OpenRouter.

## Зависимости

Зависимости проекта указаны в файле `requirements.txt`.

*   `aiogram`:  Для создания Telegram-бота.
*   `openai`: Для взаимодействия с OpenAI API (через OpenRouter).
*   `python-dotenv`:  Для загрузки переменных окружения из файла `.env`.
